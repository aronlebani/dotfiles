ORANGE="\[\033[1;31m\]"
YELLOW="\[\033[1;33m\]"
GREEN="\[\033[1;32m\]"
MAGENTA="\[\033[1;35m\]"
CYAN="\[\033[1;36m\]"
WHITE="\[\033[37;1m\]"
NORMAL="\[\033[0m\]"
RESET="\[\033[m\]"

function git_info {
    if [ $PWD = /home/aron ]
    then
        return
    fi

	BRANCH=`git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'`

	if [ ! "${BRANCH}" == "" ]
	then
		STATUS=`parse_git_dirty`
		echo " > ${BRANCH}${STATUS}"
	else
		echo ""
	fi
}

function parse_git_dirty {
	STATUS=`git status 2>&1 | tee`

	DIRTY=`echo -n "${STATUS}" 2> /dev/null | grep "modified:" &> /dev/null; echo "$?"`
	UNTRACKED=`echo -n "${STATUS}" 2> /dev/null | grep "Untracked files" &> /dev/null; echo "$?"`
	AHEAD=`echo -n "${STATUS}" 2> /dev/null | grep "Your branch is ahead of" &> /dev/null; echo "$?"`
	NEWFILE=`echo -n "${STATUS}" 2> /dev/null | grep "new file:" &> /dev/null; echo "$?"`
	RENAMED=`echo -n "${STATUS}" 2> /dev/null | grep "renamed:" &> /dev/null; echo "$?"`
	DELETED=`echo -n "${STATUS}" 2> /dev/null | grep "deleted:" &> /dev/null; echo "$?"`

	if [[ "${DIRTY}" == "0" || "${UNTRACKED}" == "0" || "${AHEAD}" == "0" || "${NEWFILE}" == "0" || "${RENAMED}" == "0" || "${DELETED}" == "0" ]]
    then
		echo "*"
	fi
}

export PS1="${WHITE}[\t]${RESET} ${CYAN}\w${RESET}${ORANGE}\$(git_info)${RESET}\n${WHITE}\$${RESET} "

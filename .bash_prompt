if tput setaf 1 &> /dev/null; then
    tput sgr0
    MAGENTA=$(tput setaf 5)
    ORANGE=$(tput setaf 4)
    GREEN=$(tput setaf 2)
    PURPLE=$(tput setaf 1)
    BOLD=$(tput bold)
    RESET=$(tput sgr0)
else
    MAGENTA="\033[1;31m"
    ORANGE="\033[1;33m"
    GREEN="\033[1;32m"
    PURPLE="\033[1;35m"
    BOLD=""
    RESET="\033[m"
fi

function git_info() {
    git rev-parse --is-inside-work-tree &>/dev/null || return # check if we're in a git repo
    branch=$(git symbolic-ref -q HEAD | sed -e 's|^refs/heads/||') # quickest check for what branch we're on
    dirty=$(git diff --quiet --ignore-submodules HEAD &>/dev/null; [ $? -eq 1 ]&& echo -e "*") # check if it's dirty (via github.com/sindresorhus/pure)
    echo $RESET$BOLD" on "$PURPLE$branch$dirty
}

function username_host() {
    # Only show username/host if not default
    if [[ $USER != stefan* ]]; then
        echo "${MAGENTA}$USER${RESET}${BOLD} at ${ORANGE}$HOSTNAME${RESET}${BOLD} in ";
    fi
}

# Fancy bash prompt
PS1="\[\e]2;$PWD\[\a\]\[\e]1;\]$(basename "$(dirname "$PWD")")/\W\[\a\]${BOLD}\$(username_host)\[$GREEN\]\w\$(git_info)\[$RESET\]\[$BOLD\]\n\$ \[$RESET\]"

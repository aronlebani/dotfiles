#!/usr/bin/python3

# Converts a json bookmarks export to markdown format.
#
# Usage: bookmarks2md <file>

import sys
import json

def parse_bookmarks(bdict, header=""):
    if 'children' not in bdict.keys():
        try:
            print('-', '[' + bdict['title'] + ']', '(' + bdict['uri'] + ')')
        except:
            pass
        return

    print(header, bdict['title'])

    for children in bdict['children']:
        parse_bookmarks(children, header+'#')

if __name__ == '__main__':
    filename = sys.argv[1]
    bdict = json.load(open(filename, 'r'))
    parse_bookmarks(bdict)

